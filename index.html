<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gram Shakti - All India</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;700&display=swap" rel="stylesheet">

<style>
  body { background: #f0f2f5; font-family: 'Noto Sans Devanagari', sans-serif; display: flex; flex-direction: column; align-items: center; padding: 10px; }
  .ad-box { width: 100%; max-width: 500px; height: 90px; background: white; border-radius: 12px; margin: 10px 0; overflow: hidden; border: 3px solid #f97316; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
  .ad-box img { width: 100%; height: 100%; object-fit: cover; cursor: pointer; }
  .app-card { background: white; width: 100%; max-width: 500px; padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
  .btn-opt { padding: 16px; border-radius: 12px; font-weight: bold; text-align: center; color: white; cursor: pointer; margin-bottom: 12px; font-size: 16px; display: block; width: 100%; }
  .form-input { width: 100%; padding: 12px; margin-bottom: 12px; border-radius: 10px; border: 1px solid #ccc; font-size: 16px; background: #fff; color: #000; }
  label { font-weight: bold; font-size: 14px; color: #333; margin-bottom: 4px; display: block; }
  .btn-submit { width: 100%; padding: 15px; background: #f97316; color: white; border-radius: 12px; font-weight: bold; font-size: 18px; }
</style>
</head>
<body>

  <div class="ad-box" onclick="window.open('https://wa.me/919784499059')">
      <img src="1770902092682 (1).png" onerror="this.src='https://via.placeholder.com/500x90?text=Top+Ad'">
  </div>

  <div class="app-card">
    <h1 class="text-3xl font-bold text-orange-600 text-center mb-6 italic">рдЧреНрд░рд╛рдо рд╢рдХреНрддрд┐</h1>
    
    <div id="menu-area">
        <div class="btn-opt bg-blue-600" onclick="openFullForm('Worker')">ЁЯС╖ рд╡рд░реНрдХрд░ рд░рдЬрд┐рд╕реНрдЯреНрд░реЗрд╢рди (рдлреЙрд░реНрдо)</div>
        <div class="btn-opt bg-purple-700" onclick="openFullForm('Company')">ЁЯПв рдХрдВрдкрдиреА рднрд░реНрддреА</div>
        <div class="btn-opt bg-green-600" onclick="openSearchForm()">ЁЯФО рдХрд╛рдо рдпрд╛ рд╡рд░реНрдХрд░ рдвреВрдБрдвреЗрдВ</div>
    <div class="btn-opt bg-red-600 shadow-lg" onclick="shareApp()">ЁЯУ▓ рджреЛрд╕реНрддреЛрдВ рдХреЛ рд╢реЗрдпрд░ рдХрд░реЗрдВ</div>
      
    </div>

    <div id="form-area"></div>
  </div>

  <div class="ad-box" onclick="window.open('https://wa.me/919784499059')">
      <img src="1770902092682 (2).png" onerror="this.src='https://via.placeholder.com/500x90?text=Bottom+Ad'">
  </div>
<script>
// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyCuvev3-jwZwQuO_fHYyv2E2ovLny4Lh8Q",
  authDomain: "gram-shakti-b135a.firebaseapp.com",
  databaseURL: "https://gram-shakti-b135a-default-rtdb.firebaseio.com",
  projectId: "gram-shakti-b135a"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const allStates = ["Andhra Pradesh", "Arunachal Pradesh", "Assam", "Bihar", "Chhattisgarh", "Goa", "Gujarat", "Haryana", "Himachal Pradesh", "Jharkhand", "Karnataka", "Kerala", "Madhya Pradesh", "Maharashtra", "Manipur", "Meghalaya", "Mizoram", "Nagaland", "Odisha", "Punjab", "Rajasthan", "Sikkim", "Tamil Nadu", "Telangana", "Tripura", "Uttar Pradesh", "Uttarakhand", "West Bengal", "Delhi", "Jammu and Kashmir"];

const categories = ["рдордЬрджреВрд░ (Labour)", "рд░рд╛рдЬрдорд┐рд╕реНрддреНрд░реА (Mason)", "рдЗрд▓реЗрдХреНрдЯреНрд░рд┐рд╢рд┐рдпрди", "рдкреНрд▓рдореНрдмрд░", "рдкреЗрдВрдЯрд░", "рдЯреЗрд▓рд░ (рджрд░реНрдЬреА)", "рдмреЭрдИ (Carpenter)", "рд▓реЛрд╣рд╛рд░", "рдореИрдХреЗрдирд┐рдХ (рдЧрд╛реЬреА)", "рдбреНрд░рд╛рдЗрд╡рд░ (Personal)", "рдбреНрд░рд╛рдЗрд╡рд░ (Taxi/Ola/Uber)", "JCB рдСрдкрд░реЗрдЯрд░", "рдЯреНрд░реИрдХреНрдЯрд░ рдбреНрд░рд╛рдЗрд╡рд░", "рдХрд┐рд░рд╛рдирд╛ рджреБрдХрд╛рди", "рдбреЗрдпрд░реА/рджреВрдз", "рд╕рдмреНрдЬреА рд╡рд┐рдХреНрд░реЗрддрд╛", "рдЦрд╛рдж-рдмреАрдЬ рднрдВрдбрд╛рд░", "рд╕реБрдкрд░рд╡рд╛рдЗрдЬрд░", "рдореБрдиреАрдо/рдЕрдХрд╛рдЙрдВрдЯреЗрдВрдЯ", "рдХрдВрдкреНрдпреВрдЯрд░ рдСрдкрд░реЗрдЯрд░", "рд╕рд┐рдХреНрдпреЛрд░рд┐рдЯреА рдЧрд╛рд░реНрдб", "рдЯреЗрдВрдЯ рд╣рд╛рдЙрд╕"];

function openFullForm(type) {
    document.getElementById('menu-area').style.display = 'none';
    let stateOptions = allStates.map(s => `<option value="${s}">${s}</option>`).join('');
    let catOptions = categories.map(c => `<option value="${c}">${c}</option>`).join('');
    
    document.getElementById('form-area').innerHTML = `
        <h2 class="text-xl font-bold mb-4 text-center text-blue-800">рдлреЙрд░реНрдо рднрд░реЗрдВ</h2>
        <label>рдирд╛рдо:</label><input type="text" id="f_name" class="form-input" placeholder="рдирд╛рдо">
        <label>рдХреИрдЯреЗрдЧрд░реА:</label><select id="f_post" class="form-input">${catOptions}</select>
        <label>рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░:</label><input type="tel" id="f_phone" class="form-input" placeholder="рдирдВрдмрд░">
        <label>рд░рд╛рдЬреНрдп:</label><select id="f_state" class="form-input">${stateOptions}</select>
        <label>рдЬрд┐рд▓рд╛:</label><input type="text" id="f_jila" class="form-input" placeholder="рдЬрд┐рд▓рд╛">
        <label>рдкрдВрдЪрд╛рдпрдд:</label><input type="text" id="f_pan" class="form-input" placeholder="рдкрдВрдЪрд╛рдпрдд">
        <label>рдЧрд╛рдБрд╡:</label><input type="text" id="f_vill" class="form-input" placeholder="рдЧрд╛рдБрд╡">
        <button class="btn-submit" onclick="saveData('${type}')">рдбреЗрдЯрд╛ рд╕реЗрд╡ рдХрд░реЗрдВ тЬЕ</button>
        <button class="w-full text-gray-500 mt-4 font-bold" onclick="location.reload()">тЖР рд╡рд╛рдкрд╕</button>
    `;
}

// YAHI WALA FUNCTION HAI JO BADLA GAYA HAI (SUCCESS BUTTON KE LIYE)
function saveData(type) {
    let d = {
        type: type,
        name: document.getElementById('f_name').value.trim(),
        post: document.getElementById('f_post').value,
        phone: document.getElementById('f_phone').value.trim(),
        state: document.getElementById('f_state').value,
        jila: document.getElementById('f_jila').value.trim().toLowerCase(),
        panchayat: document.getElementById('f_pan').value.trim().toLowerCase(),
        village: document.getElementById('f_vill').value.trim().toLowerCase()
    };

    if(!d.name || !d.phone || !d.jila || !d.village) return alert("рд╕рдм рдХреБрдЫ рднрд░реЗрдВ!");

    db.ref('users/').push(d).then(() => {
        // Form ki jagah Success screen dikhayega
        document.getElementById('form-area').innerHTML = `
            <div class="text-center p-8">
                <div class="bg-green-100 p-6 rounded-full inline-block mb-4">
                    <span style="font-size: 50px;">тЬЕ</span>
                </div>
                <h2 class="text-2xl font-bold text-green-700 mb-6">рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЬреБреЬ рдЧрдП!</h2>
                <button class="btn-submit" style="background: #16a34a; border: none; box-shadow: 0 4px 10px rgba(0,0,0,0.2);" onclick="location.reload()">
                    SUCCESS (рдареАрдХ рд╣реИ)
                </button>
            </div>
        `;
    });
}

function openSearchForm() {
    document.getElementById('menu-area').style.display = 'none';
    let stateOptions = allStates.map(s => `<option value="${s}">${s}</option>`).join('');
    let catOptions = categories.map(c => `<option value="${c}">${c}</option>`).join('');
    
    document.getElementById('form-area').innerHTML = `
        <h2 class="text-xl font-bold mb-4 text-center">рд╕рд░реНрдЪ рдХрд░реЗрдВ</h2>
        <label>рдХреНрдпрд╛ рдЪрд╛рд╣рд┐рдП?</label><select id="s_post" class="form-input">${catOptions}</select>
        <label>рд░рд╛рдЬреНрдп:</label><select id="s_state" class="form-input">${stateOptions}</select>
        <label>рдЬрд┐рд▓рд╛:</label><input type="text" id="s_jila" class="form-input" placeholder="рдЬрд┐рд▓рд╛">
        <label>рдЧрд╛рдБрд╡:</label><input type="text" id="s_vill" class="form-input" placeholder="рдЧрд╛рдБрд╡">
        <button class="btn-submit" style="background:black" onclick="getResults()">рдЦреЛрдЬреЗрдВ ЁЯФО</button>
        <button class="w-full text-gray-500 mt-4 font-bold" onclick="location.reload()">тЖР рд╡рд╛рдкрд╕</button>
    `;
}

function getResults() {
    let post = document.getElementById('s_post').value;
    let state = document.getElementById('s_state').value;
    let jila = document.getElementById('s_jila').value.trim().toLowerCase();
    let vill = document.getElementById('s_vill').value.trim().toLowerCase();
    
    document.getElementById('form-area').innerHTML = `<p class="text-center p-4">рдЦреЛрдЬ рдЬрд╛рд░реА рд╣реИ...</p>`;
    db.ref('users/').once('value', snap => {
        let html = ""; let found = false;
        snap.forEach(c => {
            let d = c.val();
            if(d.post === post && d.state === state && d.jila === jila && d.village === vill) {
                html += `<div style="background:#fff; padding:15px; border-radius:15px; margin-bottom:10px; border-left:6px solid #f97316; display:flex; justify-content:space-between; align-items:center; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                    <div><b class="text-lg">${d.name}</b><br><small class="text-blue-600 font-bold">${d.post}</small><br><small>${d.village.toUpperCase()}</small></div>
                    <a href="tel:${d.phone}" class="bg-green-600 text-white p-3 rounded-full">ЁЯУЮ</a>
                </div>`;
                found = true;
            }
        });
        document.getElementById('form-area').innerHTML = (found ? html : "<p class='text-center p-4'>рдирд╣реАрдВ рдорд┐рд▓рд╛ред</p>") + `<button class="btn-submit mt-4" style="background:#666" onclick="location.reload()">рдирдИ рдЦреЛрдЬ</button>`;
    });
}
function shareApp() {
    // рдпрд╣рд╛рдБ рдЖрдк рдЕрдкрдирд╛ рд╕рдВрджреЗрд╢ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╡реНрд╣рд╛рдЯреНрд╕рдПрдк рдкрд░ рдЬрд╛рдПрдЧрд╛
    const text = "ЁЯЪй *рдЧреНрд░рд╛рдо рд╢рдХреНрддрд┐ - рдбрд┐рдЬрд┐рдЯрд▓ рд╕реЗрд╡рд╛* ЁЯЪй\n\nрдЕрдм рдЧрд╛рдБрд╡ рдореЗрдВ рд╣реА рдкрд╛рдпреЗрдВ рдордЬрджреВрд░, рдбреНрд░рд╛рдЗрд╡рд░, рдорд┐рд╕реНрддреНрд░реА рдФрд░ рдХрдВрдкрд┐рдирдпреЛрдВ рдореЗрдВ рдиреМрдХрд░реАред\n\nрдЕрднреА рдЕрдкрдирд╛ рдлреЙрд░реНрдо рднрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдиреАрдЪреЗ рд▓рд┐рдВрдХ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ: \n";
    const url = window.location.href; // рдпрд╣ рдЖрдкрдХреА рдРрдк рдХрд╛ рд▓рд┐рдВрдХ рдЕрдкрдиреЗ рдЖрдк рд▓реЗ рд▓реЗрдЧрд╛
    const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(text + url)}`;
    window.open(whatsappUrl, '_blank');
}
</script>
</body>
</html>
