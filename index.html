<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§∂‡§ï‡•ç‡§§‡§ø - ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∞‡•ã‡§ú‡§ó‡§æ‡§∞</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;700&display=swap" rel="stylesheet">

<style>
  body { 
    background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('https://images.unsplash.com/photo-1521737711867-e3b97375f902?auto=format&fit=crop&w=1200&q=80');
    background-size: cover; background-attachment: fixed;
    font-family: 'Noto Sans Devanagari', sans-serif;
    min-height: 100vh; display: flex; flex-direction: column; align-items: center; padding: 10px;
  }
  .app-card { background: white; width: 100%; max-width: 450px; padding: 20px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
  .btn-main { width: 100%; padding: 14px; background: #f97316; color: white; border-radius: 10px; font-weight: bold; margin-bottom: 10px; cursor: pointer; border: none; font-size: 16px; }
  input, select { width: 100%; padding: 12px; margin-bottom: 10px; border-radius: 8px; border: 1px solid #ccc; color: #000; }
  .list-item { background: #f8fafc; padding: 15px; border-radius: 15px; margin-bottom: 10px; border-left: 6px solid #2563eb; }
  .job-tag { background: #dbeafe; color: #1e40af; padding: 2px 8px; border-radius: 5px; font-size: 12px; font-weight: bold; }
</style>
</head>
<body>

  <div id="app-container" class="app-card">
    <h1 class="text-3xl font-bold text-center text-orange-600 mb-2">‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§∂‡§ï‡•ç‡§§‡§ø</h1>
    <p class="text-center text-sm text-gray-500 mb-6">‡§ó‡§æ‡§Å‡§µ ‡§∏‡•á ‡§∂‡§π‡§∞ ‡§§‡§ï, ‡§π‡§∞ ‡§π‡§æ‡§• ‡§ï‡•ã ‡§ï‡§æ‡§Æ</p>
    
    <div id="main-menu">
        <button class="btn-main" onclick="startFlow('reg')">üì¢ ‡§ï‡§æ‡§Æ ‡§Ø‡§æ ‡§≠‡§∞‡•ç‡§§‡•Ä (Job) ‡§ú‡•ã‡•ú‡•á‡§Ç</button>
        <button class="btn-main" style="background:#000" onclick="startFlow('search')">üîé ‡§®‡•å‡§ï‡§∞‡•Ä ‡§Ø‡§æ ‡§µ‡§∞‡•ç‡§ï‡§∞ ‡§¢‡•Ç‡§Å‡§¢‡•á‡§Ç</button>
        <button class="w-full text-center text-blue-600 mt-4 font-bold" onclick="window.open('https://wa.me/919784499059')">üí¨ ‡§è‡§°‡§Æ‡§ø‡§® ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï</button>
    </div>

    <div id="dynamic-area"></div>
</div>

<script>
// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyCuvev3-jwZwQuO_fHYyv2E2ovLny4Lh8Q",
  authDomain: "gram-shakti-b135a.firebaseapp.com",
  databaseURL: "https://gram-shakti-b135a-default-rtdb.firebaseio.com",
  projectId: "gram-shakti-b135a"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let flow = { mode: '', type: '', name: '', phone: '', post: '', state: '', jila: '', village: '' };

function startFlow(mode) {
    flow.mode = mode;
    document.getElementById('main-menu').style.display = 'none';
    
    if(mode === 'reg') {
        document.getElementById('dynamic-area').innerHTML = `
            <h2 class="font-bold mb-4 text-lg">‡§Ü‡§™ ‡§ï‡•å‡§® ‡§π‡•à‡§Ç?</h2>
            <button class="btn-main" style="background:#2563eb" onclick="flow.type='Company'; showBasicInfo()">‡§Æ‡•à‡§Ç ‡§ï‡§Ç‡§™‡§®‡•Ä/‡§†‡•á‡§ï‡•á‡§¶‡§æ‡§∞ ‡§π‡•Ç‡§Å (‡§®‡•å‡§ï‡§∞‡•Ä ‡§¶‡•á‡§®‡•Ä ‡§π‡•à)</button>
            <button class="btn-main" style="background:#16a34a" onclick="flow.type='Worker'; showBasicInfo()">‡§Æ‡•à‡§Ç ‡§µ‡§∞‡•ç‡§ï‡§∞ ‡§π‡•Ç‡§Å (‡§®‡•å‡§ï‡§∞‡•Ä ‡§ö‡§æ‡§π‡§ø‡§è)</button>
        `;
    } else {
        showStateStep();
    }
}

function showBasicInfo() {
    let title = flow.type === 'Company' ? "‡§ï‡§Ç‡§™‡§®‡•Ä/‡§´‡§∞‡•ç‡§Æ ‡§ï‡§æ ‡§®‡§æ‡§Æ" : "‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ";
    let postLabel = flow.type === 'Company' ? "‡§ï‡§ø‡§∏ ‡§™‡§¶ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≠‡§∞‡•ç‡§§‡•Ä ‡§π‡•à?" : "‡§Ü‡§™ ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç?";
    
    document.getElementById('dynamic-area').innerHTML = `
        <h2 class="font-bold mb-3">‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≠‡§∞‡•á‡§Ç</h2>
        <label class="text-xs font-bold">${title}:</label>
        <input type="text" id="name" placeholder="‡§Ø‡§π‡§æ‡§Å ‡§≤‡§ø‡§ñ‡•á‡§Ç...">
        
        <label class="text-xs font-bold">${postLabel}:</label>
        <select id="post">
            <option>‡§Æ‡§ú‡§¶‡•Ç‡§∞/‡§π‡•á‡§≤‡•ç‡§™‡§∞</option>
            <option>‡§°‡•ç‡§∞‡§æ‡§á‡§µ‡§∞ (Ola/Uber/Private)</option>
            <option>‡§Æ‡§ø‡§∏‡•ç‡§§‡•ç‡§∞‡•Ä/‡§ï‡§æ‡§∞‡•Ä‡§ó‡§∞</option>
            <option>‡§∏‡•Å‡§™‡§∞‡§µ‡§æ‡§á‡§ú‡§∞/‡§Æ‡•à‡§®‡•á‡§ú‡§∞</option>
            <option>‡§Æ‡•Å‡§®‡•Ä‡§Æ/‡§Ö‡§ï‡§æ‡§â‡§Ç‡§ü‡•á‡§Ç‡§ü</option>
            <option>‡§∏‡•á‡§≤‡•ç‡§∏‡§Æ‡•à‡§®/‡§Æ‡§æ‡§∞‡•ç‡§ï‡•á‡§ü‡§ø‡§Ç‡§ó</option>
        </select>
        
        <label class="text-xs font-bold">‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞:</label>
        <input type="tel" id="phone" placeholder="9876543210">
        
        <button class="btn-main" onclick="saveBasic()">‡§Ü‡§ó‡•á ‡§¨‡•ù‡•á‡§Ç (‡§≤‡•ã‡§ï‡•á‡§∂‡§®)</button>
    `;
}

function saveBasic() {
    flow.name = document.getElementById('name').value.trim();
    flow.post = document.getElementById('post').value;
    flow.phone = document.getElementById('phone').value.trim();
    if(!flow.name || !flow.phone) return alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§™‡•Ç‡§∞‡•Ä ‡§≠‡§∞‡•á‡§Ç!");
    showStateStep();
}

function showStateStep() {
    const states = ['Rajasthan', 'Uttar Pradesh', 'Bihar', 'Haryana', 'MP'];
    let html = `<h2 class="font-bold mb-3">‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç</h2>`;
    states.forEach(s => {
        html += `<button class="btn-main" style="background:#4b5563" onclick="flow.state='${s}'; showJilaStep()">${s}</button>`;
    });
    document.getElementById('dynamic-area').innerHTML = html;
}

function showJilaStep() {
    document.getElementById('dynamic-area').innerHTML = `
        <h2 class="font-bold mb-2">‡§ú‡§ø‡§≤‡§æ ‡§≤‡§ø‡§ñ‡•á‡§Ç:</h2>
        <input type="text" id="jila" placeholder="‡§ú‡•à‡§∏‡•á: ‡§ú‡§Ø‡§™‡•Å‡§∞">
        <button class="btn-main" onclick="flow.jila=document.getElementById('jila').value.trim().toLowerCase(); showVillageStep()">‡§Ü‡§ó‡•á ‡§¨‡•ù‡•á‡§Ç</button>
    `;
}

function showVillageStep() {
    document.getElementById('dynamic-area').innerHTML = `
        <h2 class="font-bold mb-2">‡§ó‡§æ‡§Å‡§µ/‡§∂‡§π‡§∞ ‡§ï‡§æ ‡§®‡§æ‡§Æ:</h2>
        <input type="text" id="village" placeholder="‡§ú‡•à‡§∏‡•á: ‡§∞‡§æ‡§Æ‡§™‡•Å‡§∞">
        <button class="btn-main" onclick="flow.village=document.getElementById('village').value.trim().toLowerCase(); finalize()">‡§ï‡§®‡•ç‡§´‡§∞‡•ç‡§Æ ‡§ï‡§∞‡•á‡§Ç</button>
    `;
}

function finalize() {
    if(flow.mode === 'reg') {
        db.ref('users/').push(flow).then(() => {
            alert("‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§π‡•ã ‡§ó‡§Ø‡§æ!");
            location.reload();
        });
    } else {
        document.getElementById('dynamic-area').innerHTML = `
            <h2 class="font-bold mb-3">‡§Ü‡§™‡§ï‡•ã ‡§ï‡•ç‡§Ø‡§æ ‡§¢‡•Ç‡§Å‡§¢‡§®‡§æ ‡§π‡•à?</h2>
            <select id="searchPost">
                <option>‡§Æ‡§ú‡§¶‡•Ç‡§∞/‡§π‡•á‡§≤‡•ç‡§™‡§∞</option><option>‡§°‡•ç‡§∞‡§æ‡§á‡§µ‡§∞ (Ola/Uber/Private)</option>
                <option>‡§Æ‡§ø‡§∏‡•ç‡§§‡•ç‡§∞‡•Ä/‡§ï‡§æ‡§∞‡•Ä‡§ó‡§∞</option><option>‡§∏‡•Å‡§™‡§∞‡§µ‡§æ‡§á‡§ú‡§∞/‡§Æ‡•à‡§®‡•á‡§ú‡§∞</option>
            </select>
            <button class="btn-main" onclick="flow.post=document.getElementById('searchPost').value; showResults()">‡§∞‡§ø‡§ú‡§≤‡•ç‡§ü ‡§¶‡•á‡§ñ‡•á‡§Ç</button>
        `;
    }
}

function showResults() {
    document.getElementById('dynamic-area').innerHTML = `<p>‡§ñ‡•ã‡§ú ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...</p>`;
    db.ref('users/').once('value', snap => {
        let html = ""; let found = false;
        snap.forEach(child => {
            let d = child.val();
            if(d.village === flow.village && d.jila === flow.jila && d.post === flow.post) {
                let badge = d.type === 'Company' ? '‡§®‡•å‡§ï‡§∞‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß' : '‡§µ‡§∞‡•ç‡§ï‡§∞ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß';
                html += `
                    <div class="list-item">
                        <div class="flex-1">
                            <span class="job-tag">${badge}</span>
                            <h3 class="font-bold text-lg mt-1">${d.name}</h3>
                            <p class="text-sm text-gray-600">üìç ${d.village.toUpperCase()}, ${d.jila.toUpperCase()}</p>
                            <p class="text-sm font-bold text-blue-600">‡§™‡§¶: ${d.post}</p>
                        </div>
                        <a href="tel:${d.phone}" class="bg-green-600 text-white p-3 rounded-full h-12 w-12 flex items-center justify-center">üìû</a>
                    </div>`;
                found = true;
            }
        });
        document.getElementById('dynamic-area').innerHTML = (found ? html : "‡§ï‡•ã‡§à ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§° ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§") + 
        `<button class="btn-main mt-4" style="background:#000" onclick="location.reload()">‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§è‡§Å</button>`;
    });
}
</script>
</body>
</html>
